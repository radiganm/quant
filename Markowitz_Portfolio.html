<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8' />
    <meta http-equiv="X-UA-Compatible" content="chrome=1" />
    <meta name="description" content="Quant : Tools for Quantitative Finance" />

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Quant: Tools for Quantitative Finance</title>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"] ],
          processEscapes: true
        }
      });
    </script>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/radiganm/quant">View on GitHub</a>

          <!--h1 id="project_title">Quant</h1>
          <h2 id="project_tagline">Tools for Quantitative Finance</h2-->

          <h1 id="project_title">Markowitz Portfolio</h1>
          <!--h2 id="project_tagline">Tools for Quantitative Finance</h2-->

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/radiganm/quant/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/radiganm/quant/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h3></h3>

<h3><a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>Introduction</h3>

<p>Download the complete <a href="documentation/Markowitz-Portfolio.pdf">PDF documentation here</a>.</p>

<p>Markowitz portfolio theory is used in investment management 
as a tool for diversifying away risk through portfolio balancing.
Given a set of investment assets, it finds the most efficient  
allocation (portfolio weights).  Here, efficiency is defined  
as minimizing the expected variance.  Markowitz portfolios
may be subject to specified constraints, such as a specific 
return on investment (expected price), non-negativity 
constraints (restricting short selling), and may include 
risk-free assets or market indices [<a href="#WikiMPT">1</a>].</p>

<p>This example will select a minimum variance portfolio,
constrained to a specified expected rate of return.
All results will be annualized as commonly reported to
investors.</p>

<h3><a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>Implementation</h3>

<p>This optmization problem may be expressed as minimizing the portfolio variance, 
subject to the constraint that the individual allocation weights of the stocks add to unity,
and the expected return is equal to the specified target.</p>

<div>$$
\begin{equation*}
\begin{aligned}
& \underset{w}{\text{minimize}}
& & \mathbf{\sigma}_{p,w}^2 = \mathbf{w}^T \mathbf{\Sigma} \mathbf{w} \\
& \text{subject to}
& & \mu_{opt} = \mathbf{w}^T \mathbf{\mu} \\
&
& & \mathbf{w}^T \mathbf{\underline{1}} = 1
\end{aligned}
\label{eq:optimization_problem}
\end{equation*}
$$</div>

<p>Where</p>
<div>$$
\begin{align}
\begin{array}{cl}
\mathbf{\sigma}_{p,w}^2      & \mbox{portfolio variance of weighted assets} \\
\mathbf{w}         & \mbox{individual asset weights}  \\
\mathbf{\Sigma}    & \mbox{covariance matrix} \\
\mathbf{\mu}       & \mbox{individual asset returns} \\
\mathbf{\mu}_{opt} & \mbox{target portfolio return} \\
\end{array}
\end{align}
$$</div>

<p>Forming the Lagrangian function for the constrained minimization, we have</p>

<div>$$
\begin{equation}
L(w,\lambda_1,\lambda_2) = \mathbf{w}^T \mathbf{\Sigma} \mathbf{w} + \lambda_1 (\mathbf{w}^T \mathbf{\mu} - \mu_{opt})
\label{eq:lagrangian}
\end{equation}
$$</div>

<p>So the first order conditions are</p>

<div>$$
\begin{equation}
2 \partial L(w,\lambda_1,\lambda_2) = 2 \mathbf{\Sigma} \mathbf{w} + \lambda_1 \mathbf{\mu} + \lambda_2 \mathbf{\underline{1}} = \mathbf{\underline{0}}
\label{eq:foc1}
\end{equation}
$$</div>

<div>$$
\begin{equation}
\frac{2 \partial L(w,\lambda_1,\lambda_2)}{\partial \lambda_1} = \mathbf{w}^T \mathbf{\mu} - \mu_{opt} = 0
\label{eq:foc2}
\end{equation}
$$</div>

<div>$$
\begin{equation}
\frac{2 \partial L(w,\lambda_1,\lambda_2)}{\partial \lambda_2} = \mathbf{w}^T \mathbf{\underline{1}} - 1 = 0
\label{eq:foc3}
\end{equation}
$$</div>

<p>Expressed in matrix form</p>

<div>$$
\begin{equation}
\mathbf{A}\mathbf{x} =
\left[ \begin{array}{ccc}
2 \mathbf{\Sigma}         & \mathbf{\mu} & \mathbf{\underline{1}} \\
\mathbf{\mu}^T            & 0            & 0                      \\
\mathbf{\underline{1}}^T  & 0            & 0                      \\
\end{array} \right]
=
\left[ \begin{array}{c}
\mathbf{w} \\
\lambda_1  \\
\lambda_2  \\
\end{array} \right]
\left[ \begin{array}{c}
\mathbf{\underline{0}}^T \\
\mu_{opt}  \\
1  \\
\end{array} \right]
= \mathbf{b}
\label{eq:lineq_expand}
\end{equation}
$$</div>

<p>This may be solved for $\mathbf{b}$, where the first $n-2$ elements of $\mathbf{b}$ are the portfolio weights ($\mathbf{w}_{n} = \mathbf{b}_{n}$).</p>

<div>$$
\begin{equation}
\mathbf{b} = \mathbf{A}^{-1} \mathbf{x}
\label{eq:lineq_mat}
\end{equation}
$$</div>

<h3><a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>Example Portfolio #1: AAPL, JPM, LMT, XOM</h3>


<div>$$
\begin{array}{ l l l l }
\textbf{Portfolio #1 (AAPL, JPM, LMT, XOM)} \\
\hline
\textbf{Symbol} & \textbf{Weight} & \textbf{ROI} & \textbf{Volatilty} \\ \hline
AAPL   & 0.08 & 11.4\% & 28.8\% \\
JPM    & 0.12 & 31.6\% & 19.1\% \\
LMT    & 0.39 & 55.8\% & 16.3\% \\
XOM    & 0.40 & 08.2\% & 13.0\% \\ 
\hline
portfolio & &  25.0\% & 11.76\% \\ 
\hline
\end{array}
$$</div>

<img src="results/portfolios/AAPL_JPM_LMT_XOM/Portfolio.jpg" alt="Portfolio Performance"/>

<h3><a name="designer-templates" class="anchor" href="#designer-templates"><span class="octicon octicon-link"></span></a>Historical Data</h3>

<img src="results/portfolios/AAPL_JPM_LMT_XOM/AAPL.jpg" alt="AAPL"/>
<br/>
<img src="results/portfolios/AAPL_JPM_LMT_XOM/JPM.jpg" alt="JPM"/>
<br/>
<img src="results/portfolios/AAPL_JPM_LMT_XOM/LMT.jpg" alt="LMT"/>
<br/>
<img src="results/portfolios/AAPL_JPM_LMT_XOM/XOM.jpg" alt="XOM"/>
<br/>

<h3><a name="references" class="anchor" href="#references"><span class="octicon octicon-link"></span></a>References</h3>
<p><a name="WikiMPT" class="anchor" href="#WikiMPT"></a>[1]     <a href="http://en.wikipedia.org/wiki/Modern_portfolio_theory">Wikipedia. (2011, Aug.). Modern Portfolio Theory. [Online]. Available: http://en.wikipedia.org/wiki/Modern_portfolio_theory.</a></p>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Quant maintained by <a href="https://github.com/radiganm">Mac Radigan</a></p>
        <!--p>Published with <a href="http://pages.github.com">GitHub Pages</a></p-->
      </footer>
    </div>

  </body>
</html>
